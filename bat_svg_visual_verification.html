
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAT Components Visual Verification</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .component-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .component-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .component-text {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            min-height: 40px;
        }
        .svg-preview {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
            background: #fafafa;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .coordinate-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        .coordinate-inputs input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
        }
        .verification-section {
            margin: 15px 0;
        }
        .verification-section label {
            display: inline-block;
            margin-right: 15px;
            font-weight: bold;
        }
        .verification-section input[type="radio"] {
            margin-right: 5px;
        }
        .output-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
        }
        .output-section textarea {
            width: 100%;
            height: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.correct {
            background: #d4edda;
            color: #155724;
        }
        .status.wrong {
            background: #f8d7da;
            color: #721c24;
        }
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç BAT Components Visual Verification</h1>
        <p>Verify each component by comparing with the actual BAT diagram</p>
        <p><strong>5 components found</strong></p>
    </div>

    <div class="component-grid">

        <div class="component-card" id="component_0">
            <div class="component-title">Group: cluster_UILayer (group)</div>
            <div class="component-text">Text: "cluster_UILayer"</div>
            
            <div class="svg-preview">
                <svg width="200" height="100" viewBox="0 0 200 100">
            <rect x="100.0" y="100.0" width="200.0" height="100.0" 
                  fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
            <text x="200.0" y="150.0" text-anchor="middle" font-size="6" fill="white">cluster_UILayer</text>
        </svg>
            </div>
            
            <div class="coordinate-inputs">
                <div>
                    <label>X:</label>
                    <input type="number" id="x_0" value="1000" step="0.1" onchange="updateComponent(0)">
                </div>
                <div>
                    <label>Y:</label>
                    <input type="number" id="y_0" value="1000" step="0.1" onchange="updateComponent(0)">
                </div>
                <div>
                    <label>Width:</label>
                    <input type="number" id="w_0" value="2000" step="0.1" onchange="updateComponent(0)">
                </div>
                <div>
                    <label>Height:</label>
                    <input type="number" id="h_0" value="1000" step="0.1" onchange="updateComponent(0)">
                </div>
            </div>
            
            <div class="verification-section">
                <label>Verification:</label>
                <label><input type="radio" name="verify_0" value="correct" onchange="updateStatus(0)"> ‚úÖ Correct</label>
                <label><input type="radio" name="verify_0" value="wrong" onchange="updateStatus(0)"> ‚ùå Wrong</label>
                <span id="status_0" class="status pending">Pending</span>
            </div>
        </div>

        <div class="component-card" id="component_1">
            <div class="component-title">Group: cluster_GatewayLayer (group)</div>
            <div class="component-text">Text: "cluster_GatewayLayer"</div>
            
            <div class="svg-preview">
                <svg width="200" height="100" viewBox="0 0 200 100">
            <rect x="100.0" y="100.0" width="200.0" height="100.0" 
                  fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
            <text x="200.0" y="150.0" text-anchor="middle" font-size="6" fill="white">cluster_GatewayLayer</text>
        </svg>
            </div>
            
            <div class="coordinate-inputs">
                <div>
                    <label>X:</label>
                    <input type="number" id="x_1" value="1000" step="0.1" onchange="updateComponent(1)">
                </div>
                <div>
                    <label>Y:</label>
                    <input type="number" id="y_1" value="1000" step="0.1" onchange="updateComponent(1)">
                </div>
                <div>
                    <label>Width:</label>
                    <input type="number" id="w_1" value="2000" step="0.1" onchange="updateComponent(1)">
                </div>
                <div>
                    <label>Height:</label>
                    <input type="number" id="h_1" value="1000" step="0.1" onchange="updateComponent(1)">
                </div>
            </div>
            
            <div class="verification-section">
                <label>Verification:</label>
                <label><input type="radio" name="verify_1" value="correct" onchange="updateStatus(1)"> ‚úÖ Correct</label>
                <label><input type="radio" name="verify_1" value="wrong" onchange="updateStatus(1)"> ‚ùå Wrong</label>
                <span id="status_1" class="status pending">Pending</span>
            </div>
        </div>

        <div class="component-card" id="component_2">
            <div class="component-title">Group: cluster_EventLayer (group)</div>
            <div class="component-text">Text: "cluster_EventLayer"</div>
            
            <div class="svg-preview">
                <svg width="200" height="100" viewBox="0 0 200 100">
            <rect x="100.0" y="100.0" width="200.0" height="100.0" 
                  fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
            <text x="200.0" y="150.0" text-anchor="middle" font-size="6" fill="white">cluster_EventLayer</text>
        </svg>
            </div>
            
            <div class="coordinate-inputs">
                <div>
                    <label>X:</label>
                    <input type="number" id="x_2" value="1000" step="0.1" onchange="updateComponent(2)">
                </div>
                <div>
                    <label>Y:</label>
                    <input type="number" id="y_2" value="1000" step="0.1" onchange="updateComponent(2)">
                </div>
                <div>
                    <label>Width:</label>
                    <input type="number" id="w_2" value="2000" step="0.1" onchange="updateComponent(2)">
                </div>
                <div>
                    <label>Height:</label>
                    <input type="number" id="h_2" value="1000" step="0.1" onchange="updateComponent(2)">
                </div>
            </div>
            
            <div class="verification-section">
                <label>Verification:</label>
                <label><input type="radio" name="verify_2" value="correct" onchange="updateStatus(2)"> ‚úÖ Correct</label>
                <label><input type="radio" name="verify_2" value="wrong" onchange="updateStatus(2)"> ‚ùå Wrong</label>
                <span id="status_2" class="status pending">Pending</span>
            </div>
        </div>

        <div class="component-card" id="component_3">
            <div class="component-title">Group: cluster_DataLayer (group)</div>
            <div class="component-text">Text: "cluster_DataLayer"</div>
            
            <div class="svg-preview">
                <svg width="200" height="100" viewBox="0 0 200 100">
            <rect x="100.0" y="100.0" width="200.0" height="100.0" 
                  fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
            <text x="200.0" y="150.0" text-anchor="middle" font-size="6" fill="white">cluster_DataLayer</text>
        </svg>
            </div>
            
            <div class="coordinate-inputs">
                <div>
                    <label>X:</label>
                    <input type="number" id="x_3" value="1000" step="0.1" onchange="updateComponent(3)">
                </div>
                <div>
                    <label>Y:</label>
                    <input type="number" id="y_3" value="1000" step="0.1" onchange="updateComponent(3)">
                </div>
                <div>
                    <label>Width:</label>
                    <input type="number" id="w_3" value="2000" step="0.1" onchange="updateComponent(3)">
                </div>
                <div>
                    <label>Height:</label>
                    <input type="number" id="h_3" value="1000" step="0.1" onchange="updateComponent(3)">
                </div>
            </div>
            
            <div class="verification-section">
                <label>Verification:</label>
                <label><input type="radio" name="verify_3" value="correct" onchange="updateStatus(3)"> ‚úÖ Correct</label>
                <label><input type="radio" name="verify_3" value="wrong" onchange="updateStatus(3)"> ‚ùå Wrong</label>
                <span id="status_3" class="status pending">Pending</span>
            </div>
        </div>

        <div class="component-card" id="component_4">
            <div class="component-title">Group: cluster_MonitoringLayer (group)</div>
            <div class="component-text">Text: "cluster_MonitoringLayer"</div>
            
            <div class="svg-preview">
                <svg width="200" height="100" viewBox="0 0 200 100">
            <rect x="100.0" y="100.0" width="200.0" height="100.0" 
                  fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
            <text x="200.0" y="150.0" text-anchor="middle" font-size="6" fill="white">cluster_MonitoringLayer</text>
        </svg>
            </div>
            
            <div class="coordinate-inputs">
                <div>
                    <label>X:</label>
                    <input type="number" id="x_4" value="1000" step="0.1" onchange="updateComponent(4)">
                </div>
                <div>
                    <label>Y:</label>
                    <input type="number" id="y_4" value="1000" step="0.1" onchange="updateComponent(4)">
                </div>
                <div>
                    <label>Width:</label>
                    <input type="number" id="w_4" value="2000" step="0.1" onchange="updateComponent(4)">
                </div>
                <div>
                    <label>Height:</label>
                    <input type="number" id="h_4" value="1000" step="0.1" onchange="updateComponent(4)">
                </div>
            </div>
            
            <div class="verification-section">
                <label>Verification:</label>
                <label><input type="radio" name="verify_4" value="correct" onchange="updateStatus(4)"> ‚úÖ Correct</label>
                <label><input type="radio" name="verify_4" value="wrong" onchange="updateStatus(4)"> ‚ùå Wrong</label>
                <span id="status_4" class="status pending">Pending</span>
            </div>
        </div>

    </div>

    <div class="output-section">
        <h3>üìä Analysis Output</h3>
        <button class="btn btn-success" onclick="generateAnalysis()">Generate Analysis</button>
        <button class="btn" onclick="exportToJSON()">Export to JSON</button>
        <button class="btn" onclick="applyFixes()">Apply Fixes to batNarration.js</button>
        
        <textarea id="output" placeholder="Click 'Generate Analysis' to see results..."></textarea>
    </div>

    <script>
        let components = [{"id": "group_2", "type": "group", "x": 1000, "y": 1000, "width": 2000, "height": 1000, "text": "cluster_UILayer", "title": "Group: cluster_UILayer"}, {"id": "group_3", "type": "group", "x": 1000, "y": 1000, "width": 2000, "height": 1000, "text": "cluster_GatewayLayer", "title": "Group: cluster_GatewayLayer"}, {"id": "group_6", "type": "group", "x": 1000, "y": 1000, "width": 2000, "height": 1000, "text": "cluster_EventLayer", "title": "Group: cluster_EventLayer"}, {"id": "group_7", "type": "group", "x": 1000, "y": 1000, "width": 2000, "height": 1000, "text": "cluster_DataLayer", "title": "Group: cluster_DataLayer"}, {"id": "group_8", "type": "group", "x": 1000, "y": 1000, "width": 2000, "height": 1000, "text": "cluster_MonitoringLayer", "title": "Group: cluster_MonitoringLayer"}];
        
        function updateComponent(index) {
            const component = components[index];
            component.x = parseFloat(document.getElementById(`x_${index}`).value);
            component.y = parseFloat(document.getElementById(`y_${index}`).value);
            component.width = parseFloat(document.getElementById(`w_${index}`).value);
            component.height = parseFloat(document.getElementById(`h_${index}`).value);
            
            // Update SVG preview
            updateSVGPreview(index);
        }
        
        function updateSVGPreview(index) {
            const component = components[index];
            const preview = document.querySelector(`#component_${index} .svg-preview`);
            preview.innerHTML = createComponentSVG(component);
        }
        
        function createComponentSVG(component) {
            const x = component.x;
            const y = component.y;
            const w = component.width;
            const h = component.height;
            
            if (component.type == 'ellipse') {
                const cx = x + w/2;
                const cy = y + h/2;
                const rx = w/2;
                const ry = h/2;
                return `<svg width="200" height="100" viewBox="0 0 200 100">
                    <ellipse cx="${cx/10}" cy="${cy/10}" rx="${rx/10}" ry="${ry/10}" 
                            fill="#ff6b6b" stroke="#d63031" stroke-width="1"/>
                    <text x="${cx/10}" y="${cy/10}" text-anchor="middle" font-size="8" fill="white">${component.text}</text>
                </svg>`;
            } else {
                return `<svg width="200" height="100" viewBox="0 0 200 100">
                    <rect x="${x/10}" y="${y/10}" width="${w/10}" height="${h/10}" 
                          fill="#74b9ff" stroke="#0984e3" stroke-width="1"/>
                    <text x="${(x + w/2)/10}" y="${(y + h/2)/10}" text-anchor="middle" font-size="6" fill="white">${component.text}</text>
                </svg>`;
            }
        }
        
        function updateStatus(index) {
            const status = document.getElementById(`status_${index}`);
            const radios = document.querySelectorAll(`input[name="verify_${index}"]`);
            
            for (let radio of radios) {
                if (radio.checked) {
                    if (radio.value === 'correct') {
                        status.textContent = 'Correct';
                        status.className = 'status correct';
                    } else {
                        status.textContent = 'Wrong';
                        status.className = 'status wrong';
                    }
                    break;
                }
            }
        }
        
        function generateAnalysis() {
            let correct = 0;
            let wrong = 0;
            let pending = 0;
            let csvData = 'Component,Type,Status,X,Y,Width,Height,Text\n';
            
            for (let i = 0; i < components.length; i++) {
                const status = document.getElementById(`status_${i}`);
                const component = components[i];
                
                let statusText = 'Pending';
                if (status.classList.contains('correct')) {
                    statusText = 'Correct';
                    correct++;
                } else if (status.classList.contains('wrong')) {
                    statusText = 'Wrong';
                    wrong++;
                } else {
                    pending++;
                }
                
                csvData += `${component.title},${component.type},${statusText},${component.x},${component.y},${component.width},${component.height},"${component.text}"\n`;
            }
            
            const summary = `Summary: ${correct} Correct, ${wrong} Wrong, ${pending} Pending`;
            document.getElementById('output').value = summary + '\n\n' + csvData;
        }
        
        function exportToJSON() {
            const data = {
                components: components,
                summary: {
                    total: components.length,
                    correct: document.querySelectorAll('.status.correct').length,
                    wrong: document.querySelectorAll('.status.wrong').length,
                    pending: document.querySelectorAll('.status.pending').length
                }
            };
            document.getElementById('output').value = JSON.stringify(data, null, 2);
        }
        
        function applyFixes() {
            alert('This will update the batNarration.js file with corrected coordinates. Make sure to backup first!');
            // Implementation would go here
        }
        
        // Initialize SVG previews
        for (let i = 0; i < components.length; i++) {
            updateSVGPreview(i);
        }
    </script>
</body>
</html>
