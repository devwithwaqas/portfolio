<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAT Complete Component Verification Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .component-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .component-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .svg-cropper {
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 15px 0;
            background: #fafafa;
            height: 200px;
            width: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            position: relative;
            overflow: hidden;
        }
        .svg-cropper svg {
            max-width: 100%;
            max-height: 100%;
        }
        .coordinate-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        .coordinate-inputs input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
        }
        .verification-section {
            margin: 15px 0;
        }
        .verification-section label {
            display: inline-block;
            margin-right: 15px;
            font-weight: bold;
            font-size: 14px;
        }
        .verification-section input[type="radio"] {
            margin-right: 5px;
        }
        .output-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 20px;
            margin-top: 30px;
        }
        .output-section textarea {
            width: 100%;
            height: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .component-info {
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
        }
        .stats {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>BAT Complete Component Verification Tool</h1>
        <p>Verify and correct coordinates for all 37 individual shapes and 8 main groups</p>
    </div>

    <div class="stats">
        <strong>Found: 37 Individual Shapes + 8 Main Groups = 45 Total Components</strong>
    </div>

    <div id="components-container" class="component-grid">
        <!-- Components will be dynamically generated here -->
    </div>

    <div class="output-section">
        <h3>Verification Results</h3>
        <button class="btn" onclick="exportResults()">Export Results</button>
        <button class="btn" onclick="exportCSV()">Export CSV</button>
        <button class="btn" onclick="exportForNarration()">Export for batNarration.js</button>
        <textarea id="output" placeholder="Verification results will appear here..."></textarea>
    </div>

    <script>
        // Store all components
        let allComponents = [
        {
                "name": "External System 1",
                "x": 25791.44,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 2",
                "x": 21053.94,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 3",
                "x": 22207.06,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 4",
                "x": 24638.31,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 5",
                "x": 18748.44,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 6",
                "x": 19901.56,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "ML Platform",
                "x": 11275.0,
                "y": 10168.0,
                "width": 488.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Backup Service",
                "x": 1972.0,
                "y": 10168.0,
                "width": 494.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Azure Monitor",
                "x": 10682.0,
                "y": 9175.0,
                "width": 462.0,
                "height": 368.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Event Grid",
                "x": 15628.0,
                "y": 8233.0,
                "width": 538.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "External System 7",
                "x": 26947.0,
                "y": 6258.0,
                "width": 643.0,
                "height": 273.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "External System 8",
                "x": 23362.0,
                "y": 6258.0,
                "width": 651.0,
                "height": 273.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "external"
        },
        {
                "name": "Reporting Service",
                "x": 766.0,
                "y": 11124.0,
                "width": 567.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Auth Service",
                "x": 5684.0,
                "y": 5181.0,
                "width": 481.0,
                "height": 375.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Service Bus",
                "x": 15621.0,
                "y": 7262.0,
                "width": 571.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Stream Analytics",
                "x": 15602.0,
                "y": 10168.0,
                "width": 583.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Analytics Service",
                "x": 5595.0,
                "y": 4213.0,
                "width": 586.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Power BI",
                "x": 10063.0,
                "y": 10168.0,
                "width": 586.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Angular Portal",
                "x": 1370.0,
                "y": 1260.0,
                "width": 511.0,
                "height": 368.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "frontend"
        },
        {
                "name": "Monitoring Service",
                "x": 752.0,
                "y": 10168.0,
                "width": 596.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Audit Service",
                "x": 3090.0,
                "y": 10168.0,
                "width": 602.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Integration Service",
                "x": 6804.0,
                "y": 4213.0,
                "width": 605.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Azure Functions",
                "x": 15585.0,
                "y": 9201.0,
                "width": 605.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Notification Service",
                "x": 6791.0,
                "y": 5210.0,
                "width": 618.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "App Insights",
                "x": 10600.0,
                "y": 8233.0,
                "width": 625.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "azure"
        },
        {
                "name": "Analytics Dashboard",
                "x": 3794.0,
                "y": 1285.0,
                "width": 643.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "frontend"
        },
        {
                "name": "Security Gateway",
                "x": 1899.0,
                "y": 4188.0,
                "width": 558.0,
                "height": 368.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "gateway"
        },
        {
                "name": "IT Service",
                "x": 4396.0,
                "y": 7233.0,
                "width": 552.0,
                "height": 375.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "App Gateway",
                "x": 1901.0,
                "y": 3246.0,
                "width": 660.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "gateway"
        },
        {
                "name": "Admin Dashboard",
                "x": 2505.0,
                "y": 1285.0,
                "width": 664.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "frontend"
        },
        {
                "name": "Saga Orchestrator",
                "x": 4396.0,
                "y": 5210.0,
                "width": 665.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "Mobile PWA",
                "x": 68.0,
                "y": 1285.0,
                "width": 677.0,
                "height": 317.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "frontend"
        },
        {
                "name": "HR Service",
                "x": 5030.0,
                "y": 6181.0,
                "width": 528.0,
                "height": 426.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "service"
        },
        {
                "name": "API Management",
                "x": 1922.0,
                "y": 2253.0,
                "width": 619.0,
                "height": 368.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "gateway"
        },
        {
                "name": "Business Analyst",
                "x": 3845.0,
                "y": 186.0,
                "width": 541.0,
                "height": 423.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "person"
        },
        {
                "name": "BAT Employee",
                "x": 721.0,
                "y": 160.0,
                "width": 558.0,
                "height": 474.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "person"
        },
        {
                "name": "System Admin",
                "x": 2498.0,
                "y": 186.0,
                "width": 680.0,
                "height": 423.0,
                "type": "rectangle",
                "entity_id": "",
                "text": "",
                "category": "person"
        },
        {
                "name": "SAP Planet 8/9",
                "x": 25791.44,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "sap_planet",
                "text": "\u00abexternal_system\u00bb SAP Planet 8/9 ERP System",
                "category": "external"
        },
        {
                "name": "Cherwell HR",
                "x": 21053.94,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "cherwell_hr",
                "text": "\u00abexternal_system\u00bb Cherwell HR HR Management",
                "category": "external"
        },
        {
                "name": "Power Apps",
                "x": 22207.06,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "power_apps",
                "text": "\u00abexternal_system\u00bb Power Apps Low-code Platform",
                "category": "external"
        },
        {
                "name": "Microsoft Teams",
                "x": 24638.31,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "teams",
                "text": "\u00abexternal_system\u00bb Microsoft Teams Communication",
                "category": "external"
        },
        {
                "name": "Azure AD",
                "x": 18748.44,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "azure_ad",
                "text": "\u00abexternal_system\u00bb Azure AD Identity Provider",
                "category": "external"
        },
        {
                "name": "Azure Data Lake",
                "x": 19901.56,
                "y": 6257.75,
                "width": 529.64,
                "height": 273.49,
                "type": "group",
                "entity_id": "data_lake",
                "text": "\u00abexternal_system\u00bb Azure Data Lake Data Storage",
                "category": "external"
        },
        {
                "name": "Cherwell IT",
                "x": 26947.0,
                "y": 6258.0,
                "width": 643.0,
                "height": 273.0,
                "type": "group",
                "entity_id": "cherwell_it",
                "text": "\u00abexternal_system\u00bb Cherwell IT IT Service Management",
                "category": "external"
        },
        {
                "name": "SharePoint",
                "x": 23362.0,
                "y": 6258.0,
                "width": 651.0,
                "height": 273.0,
                "type": "group",
                "entity_id": "sharepoint",
                "text": "\u00abexternal_system\u00bb SharePoint Document Management",
                "category": "external"
        }
];
        
        function updateComponent(index) {
            const component = allComponents[index];
            component.x = parseFloat(document.getElementById(`x_${index}`).value);
            component.y = parseFloat(document.getElementById(`y_${index}`).value);
            component.width = parseFloat(document.getElementById(`w_${index}`).value);
            component.height = parseFloat(document.getElementById(`h_${index}`).value);
        }
        
        function generateComponents() {
            const container = document.getElementById('components-container');
            container.innerHTML = '';
            
            allComponents.forEach((component, index) => {
                const card = document.createElement('div');
                card.className = 'component-card';
                
                card.innerHTML = `
                    <div class="component-title">${component.name}</div>
                    <div class="component-info">
                        Type: ${component.type} | Category: ${component.category}<br>
                        Entity ID: ${component.entity_id}<br>
                        Text: ${component.text}
                    </div>
                    <div class="svg-cropper" id="cropper_${index}">
                        <div style="text-align: center; color: #666;">
                            SVG Preview<br>
                            <small>Component: ${component.name}</small><br>
                            <small>Size: ${component.width}x${component.height}</small><br>
                            <small>Position: (${component.x}, ${component.y})</small>
                        </div>
                    </div>
                    <div class="coordinate-inputs">
                        <input type="number" id="x_${index}" value="${component.x}" step="0.1" onchange="updateComponent(${index})" placeholder="X">
                        <input type="number" id="y_${index}" value="${component.y}" step="0.1" onchange="updateComponent(${index})" placeholder="Y">
                        <input type="number" id="w_${index}" value="${component.width}" step="0.1" onchange="updateComponent(${index})" placeholder="Width">
                        <input type="number" id="h_${index}" value="${component.height}" step="0.1" onchange="updateComponent(${index})" placeholder="Height">
                    </div>
                    <div class="verification-section">
                        <label>Verification:</label>
                        <label><input type="radio" name="verify_${index}" value="correct"> Correct</label>
                        <label><input type="radio" name="verify_${index}" value="wrong"> Wrong</label>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        function exportResults() {
            const results = [];
            
            allComponents.forEach((component, index) => {
                const verification = document.querySelector(`input[name="verify_${index}"]:checked`);
                results.push({
                    name: component.name,
                    type: component.type,
                    category: component.category,
                    entity_id: component.entity_id,
                    x: component.x,
                    y: component.y,
                    width: component.width,
                    height: component.height,
                    text: component.text,
                    verification: verification ? verification.value : 'not_verified'
                });
            });
            
            document.getElementById('output').value = JSON.stringify(results, null, 2);
        }
        
        function exportCSV() {
            const results = [];
            
            allComponents.forEach((component, index) => {
                const verification = document.querySelector(`input[name="verify_${index}"]:checked`);
                results.push({
                    name: component.name,
                    type: component.type,
                    category: component.category,
                    entity_id: component.entity_id,
                    x: component.x,
                    y: component.y,
                    width: component.width,
                    height: component.height,
                    text: component.text,
                    verification: verification ? verification.value : 'not_verified'
                });
            });
            
            // Convert to CSV
            const headers = ['name', 'type', 'category', 'entity_id', 'x', 'y', 'width', 'height', 'text', 'verification'];
            const csvContent = [
                headers.join(','),
                ...results.map(row => headers.map(header => `"${row[header]}"`).join(','))
            ].join('\n');
            
            document.getElementById('output').value = csvContent;
        }
        
        function exportForNarration() {
            const results = [];
            
            allComponents.forEach((component, index) => {
                const verification = document.querySelector(`input[name="verify_${index}"]:checked`);
                if (verification && verification.value === 'correct') {
                    results.push({
                        title: component.name,
                        description: component.text || `This is the ${component.name} component`,
                        highlights: [component.x, component.y, component.width, component.height]
                    });
                }
            });
            
            document.getElementById('output').value = JSON.stringify(results, null, 2);
        }
        
        // Initialize the page
        window.onload = function() {
            generateComponents();
        };
    </script>
</body>
</html>